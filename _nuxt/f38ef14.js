(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{502:function(t,e,o){"use strict";o.d(e,"a",(function(){return r}));var n=o(514);function r(){return Object(n.a)({apiKey:"AIzaSyDjAHb07_Mk-pJExz3tg04BgpB8QLHvFgY",authDomain:"rail-nuxt.firebaseapp.com",databaseURL:"https://rail-nuxt-default-rtdb.firebaseio.com",projectId:"rail-nuxt",storageBucket:"rail-nuxt.appspot.com",messagingSenderId:"85380246039",appId:"1:85380246039:web:82e4bcb2bdc6ed35f5ca52",measurementId:"G-4HSRY9S9HE"})}},503:function(t,e,o){"use strict";o.d(e,"a",(function(){return r}));var n=o(505);function r(){var t=(new Date).toGMTString(),e=new n.a("SHA-1","TEXT");return e.setHMACKey("oPs2MCCXebrQ1LN0n0g6M8kY81Q","TEXT"),e.update("x-date: "+t),{Authorization:'hmac username="bd83b99ad326452a97b670ff9c5aebba", algorithm="hmac-sha1", headers="x-date", signature="'+e.getHMAC("B64")+'"',"X-Date":t}}},552:function(t,e,o){var content=o(609);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(62).default)("1819b806",content,!0,{sourceMap:!1})},608:function(t,e,o){"use strict";o(552)},609:function(t,e,o){var n=o(61)(!1);n.push([t.i,".alert-area[data-v-29374636],.confirm-area[data-v-29374636]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);justify-items:center;z-index:10}.alert-area .v-btn:not(.v-btn--round).v-size--default[data-v-29374636]{min-width:20px}.select-area[data-v-29374636]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);justify-items:center;z-index:10}.data-input[data-v-29374636],.select-area .v-input[data-v-29374636]{max-width:200px}.train-no[data-v-29374636]{cursor:pointer}.train-no[data-v-29374636]:hover{background:rgba(111,238,238,.596)}.checkout-cars[data-v-29374636]{max-width:1200px}.can-be-choose[data-v-29374636]{display:inline-block;background:#8ecbcf;color:#8ecbcf}.cant-be-choose[data-v-29374636]{display:inline-block;background:#5e7380;color:#5e7380}.be-choosed[data-v-29374636]{display:inline-block;background:#d86c6c;color:#d86c6c}.seat-choice[data-v-29374636]{margin:5% auto;padding:3% auto;width:70%;border:2px solid #ccc;text-align:center}.one-train[data-v-29374636]{margin:3% auto}.select-car[data-v-29374636]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center}.seat-num[data-v-29374636]{margin:3% 2%;height:6vh;width:15%}.select-car[data-v-29374636] :nth-child(2),.select-car[data-v-29374636] :nth-child(6),.select-car[data-v-29374636] :nth-child(10),.select-car[data-v-29374636] :nth-child(14),.select-car[data-v-29374636] :nth-child(18){margin-right:12%}.one-train input[type=checkbox][data-v-29374636]{display:none}.one-train input:checked+.button[data-v-29374636]{background:#5e7380;color:#fff}.one-train input:checked+.booked[data-v-29374636]{background:#d86c6c;color:#fff}.one-train .button[data-v-29374636]{display:inline-block;background:#8ecbcf;height:8vh;width:8vh;color:#333;cursor:pointer;line-height:8vh}.one-train .button[data-v-29374636]:hover{background:rgba(142,203,207,.48627)}.one-train .round[data-v-29374636]{border-radius:5px}.car-no[data-v-29374636]{width:100%}.info-table[data-v-29374636]{position:absolute;top:25%;right:25%;width:50%;z-index:3;border:2px solid #000}.no-hover[data-v-29374636]{background-color:transparent!important}.info-table td[data-v-29374636]{position:relative;text-align:center}.info-table td[data-v-29374636],.info-table th[data-v-29374636]{border:none!important;padding:0!important}.info-table th[data-v-29374636]{text-align:center!important}.info-table tr span[data-v-29374636]{position:absolute;padding:2%;top:0;right:0}.info-table tr span[data-v-29374636]:hover{background:#ff284c;color:#fff;cursor:pointer}.booked[data-v-29374636]{color:tomato}.booking-form[data-v-29374636]{background:#fff;position:absolute;top:25%;right:25%;width:50%;z-index:3;border:2px solid #000}.booking-form td[data-v-29374636],.booking-form th[data-v-29374636]{border:none!important;padding:0!important}.booking-form .v-data-table>.v-data-table__wrapper>table>tbody>tr>th[data-v-29374636],.booking-form .v-data-table>.v-data-table__wrapper>table>thead>tr>th[data-v-29374636]{text-align:center!important;font-size:1rem}.booking-form .v-data-table>.v-data-table__wrapper>table>tbody>tr>td[data-v-29374636]{font-size:16px}.w-100[data-v-29374636]{width:100%}.input[data-v-29374636]{width:100px}.personal[data-v-29374636]{width:150px}@media (max-width:1000px){.seat-choice[data-v-29374636]{width:95%}.booking-form[data-v-29374636],.info-table[data-v-29374636]{width:70%;right:10%;top:30%}}@media (max-width:705px){.bookingPanel[data-v-29374636]{width:100%}.one-train .button[data-v-29374636]{width:6vh;height:6vh}.booking-form[data-v-29374636],.info-table[data-v-29374636]{width:80%;right:8%;top:30%}}",""]),t.exports=n},635:function(t,e,o){"use strict";o.r(e);var n=o(11),r=(o(70),o(15),o(5),o(34),o(35),o(16),o(19),o(181),o(20),o(54),o(17),o(266),o(37),o(52),o(99)),c=o.n(r),l=o(512),h=o(503),d=o(502),v={asyncData:function(){return Object(n.a)(regeneratorRuntime.mark((function t(){var e,o,n,r,c,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Object(l.d)(Object(l.c)(Object(d.a)())),t.next=3,Object(l.b)(Object(l.a)(e,"bookedSeats/")).then((function(t){return Object.keys(t.val())}));case 3:for(o=t.sent,n=["0803","0609","0813","0125","0829","0141","0845","0853","0861","0295"],r=[],c=0;c<n.length;c++)h=Object(l.b)(Object(l.a)(e,"oneTrains/info/No".concat(n[c]))).then((function(t){return t.val()})),r.push(h);return t.next=9,Promise.all(r);case 9:return t.t0=t.sent,t.t1=o,t.abrupt("return",{trainNoLists:t.t0,dateList:t.t1});case 12:case"end":return t.stop()}}),t)})))()},data:function(){var t=this;return{alert:!1,message:"",confirm:!1,confirmMes:"",confirmValue:!1,select:!1,select2:!1,selectMes:"",showPanel:!1,readyBookDisable:!0,showDelete:!1,dateList:["0000-00-00"],trainList:[{No0000:{GeneralTrainInfo:{Direction:0,EndingStationID:"",EndingStationName:{En:"",Zh_tw:""},StartingStationID:"",StartingStationName:{En:"",Zh_tw:""},TrainNo:""},ServiceDay:{},SrcUpdateTime:"",StopTimes:[]}}],showTrainNos:!1,trainNoLists:[{GeneralTrainInfo:{Direction:0,EndingStationID:"",EndingStationName:{En:"",Zh_tw:""},StartingStationID:"",StartingStationName:{En:"",Zh_tw:""},TrainNo:""},ServiceDay:{},SrcUpdateTime:"",StopTimes:[]}],selectedTrain:"",direction:0,sOrN:[{name:this.$t("checkoutCars.toSouth"),value:0},{name:this.$t("checkoutCars.toNorth"),value:1}],toSouth:[],toNorth:[],trainNo:"",dateSearch:"",trainData:{GeneralTrainInfo:{Direction:0,EndingStationID:"",EndingStationName:{En:"",Zh_tw:""},StartingStationID:"",StartingStationName:{En:"",Zh_tw:""},TrainNo:""},ServiceDay:{},SrcUpdateTime:"",StopTimes:[]},seats:[[],[],[],[],[],[],[],[],[],[]],carNos:["A","B","C","D","E","F","G","H","I","J"],selectedCar:0,showSelectedCar:"A",inputSeatData:[{seatsNo:"",tookOrNot:[]}],showInfos:{seatsNo:"",tookOrNot:[{station:"0990",took:!1},{station:"1000",took:!1},{station:"1010",took:!1},{station:"1020",took:!1},{station:"1030",took:!1},{station:"1035",took:!1},{station:"1040",took:!1},{station:"1043",took:!1},{station:"1047",took:!1},{station:"1050",took:!1},{station:"1060",took:!1},{station:"1070",took:!1}]},backupShowInfos:{},tickType:[{name:this.$t("manage.adult"),value:"adult"},{name:this.$t("manage.kid"),value:"kid"},{name:this.$t("manage.love"),value:"love"},{name:this.$t("manage.older"),value:"elder"},{name:this.$t("manage.student"),value:"student"}],bookedSeats:[],seatsList:!1,goBookSys:!1,selectedSeats:[],bookPanel:!1,todayDate:"",todayTime:"",userId:"",phoneNum:"",phoneNumRule:[function(e){return!!e||t.$t("booking.phoneRule0")},function(e){return 10===e.length||t.$t("booking.phoneRule1")}],userIdRule:[function(e){return!!e||t.$t("booking.idRule0")},function(e){return 10===e.length||t.$t("booking.idRule1")},function(e){return/(?=.*[A-Z])/.test(e)||t.$t("booking.idRule2")}],searchInfo:{departure:{name:this.$t("data.station0"),value:""},arrival:{name:this.$t("data.station0"),value:""}},stops:[{name:this.$t("data.station0"),value:""},{name:this.$t("data.station0990"),value:"0990"},{name:this.$t("data.station1000"),value:"1000"},{name:this.$t("data.station1010"),value:"1010"},{name:this.$t("data.station1020"),value:"1020"},{name:this.$t("data.station1030"),value:"1030"},{name:this.$t("data.station1035"),value:"1035"},{name:this.$t("data.station1040"),value:"1040"},{name:this.$t("data.station1043"),value:"1043"},{name:this.$t("data.station1047"),value:"1047"},{name:this.$t("data.station1050"),value:"1050"},{name:this.$t("data.station1060"),value:"1060"},{name:this.$t("data.station1070"),value:"1070"}],backupStops:[],carType:"",ticketCount:[{key:"adult",name:"booking.adultTick",value:0},{key:"kid",name:"booking.kidTickL",value:0},{key:"love",name:"booking.loveTick",value:0},{key:"older",name:"booking.olderTickL",value:0},{key:"student",name:"booking.studentTick",value:0}],ticketCountNums:[{num:0,value:0},{num:1,value:1},{num:2,value:2},{num:3,value:3},{num:4,value:4},{num:5,value:5},{num:6,value:6},{num:7,value:7},{num:8,value:8},{num:9,value:9},{num:10,value:10}],tookOrNot:[{station:"0990",took:!1},{station:"1000",took:!1},{station:"1010",took:!1},{station:"1020",took:!1},{station:"1030",took:!1},{station:"1035",took:!1},{station:"1040",took:!1},{station:"1043",took:!1},{station:"1047",took:!1},{station:"1050",took:!1},{station:"1060",took:!1},{station:"1070",took:!1}],userList:[{name:"",value:""}],user:{ID:"",date:"",phone:"",time:"",type:""},selectedDelete:"",callData:{startStation:{name:"",value:""},endStation:{name:"",value:""},carType:"",date:"",trainNo:"",departTime:"",arrivalTime:"",ticketCount:[{key:"",name:"",value:0},{key:"",name:"",value:0},{key:"",name:"",value:0},{key:"",name:"",value:0},{key:"",name:"",value:0}],seatsNo:[""],price:0},callType:"",direct:"",selectedType:"",totalSeat:0,totalPrice:0,fares:{freeKid:0,standardKid:0,standardGroup:0,freeAdult:0,standardAdult:0,bussinessKid:0,bussinessGroup:0,bussinessAdult:0},showType:{adult:[],kid:[],love:[],older:[],student:[]},trainTime:{departure:"",arrival:""}}},mounted:function(){this.backupStops=JSON.parse(JSON.stringify(this.stops)),this.backupShowInfos=JSON.parse(JSON.stringify(this.showInfos))},watch:{dateSearch:{handler:function(){this.getTrainList()}},trainNo:{handler:function(){this.getTrainStops()}},direction:{handler:function(){this.madeTrainList(),this.getAnotherList()}},ticketCount:{handler:function(){this.dealTicket(),this.dealShowSeats()},deep:!0},searchInfo:{handler:function(){""!==this.searchInfo.departure.value&&""!==this.searchInfo.arrival.value&&(this.getPrice(this.searchInfo.departure.value,this.searchInfo.arrival.value),this.getTrainTime())},deep:!0},carType:{handler:function(){this.dealTicket()}},selectedCar:{handler:function(){this.showSelectedCar=this.carNos[this.selectedCar]}},confirmValue:{handler:function(){this.confirmValue&&this.showDelete&&""!==this.selectedType?this.rebuildUserDataU(this.callData,this.callType):this.confirmValue&&this.showDelete?this.rebuildUserData(this.callData,this.callType):this.confirmValue&&this.oneWayBook()}}},methods:{customAlert:function(t){this.alert=!0,this.message=t},closeAlert:function(){this.alert=!1},customConfirm:function(t){this.confirm=!0,this.confirmMes=t},closeConfirm:function(){this.confirmValue=!1,this.confirm=!1},OKConfirm:function(){this.confirmValue=!0,this.confirm=!1},selectTrain:function(t){this.selectedTrain===t?this.selectedTrain="":(this.selectedTrain="",this.selectedTrain=t)},getAnotherList:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var o,n,r,c,h,v,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=["0803","0609","0813","0125","0829","0141","0845","0853","0861","0295"],n=["0802","0610","0814","0630","0830","0654","0846","0854","0862","0294"],r=[],c=[],c=0===t.direction?o:n,h=Object(l.d)(Object(l.c)(Object(d.a)())),v=0;v<c.length;v++)f=Object(l.b)(Object(l.a)(h,"oneTrains/info/No".concat(c[v]))).then((function(t){return t.val()})),r.push(f);return e.next=9,Promise.all(r);case 9:r=e.sent,t.trainNoLists=r;case 11:case"end":return e.stop()}}),e)})))()},openTrainLists:function(){!1===this.showTrainNos?this.showTrainNos=!0:this.showTrainNos=!1},resetData:function(){var t=this;this.inputSeatData=[],this.selectedSeats=[],this.bookedSeats=[],this.selectedCar=0,this.goBookSys=!1,this.seatsList=!1,this.bookPanel=!1,this.confirmValue=!1,this.showPanel=!1,this.userId="",this.phoneNum="",this.carType="";this.ticketCount.forEach((function(t){t.value=0}));this.tookOrNot.forEach((function(t){t.took=!1})),this.totalSeat=0,this.totalPrice=0,["adult","kid","love","older","student"].forEach((function(e){t.showType[e]=[]}))},createSeats:function(){this.seats=[[],[],[],[],[],[],[],[],[],[]];for(var t={},e={},o={},n={},r={},c={},l={},h={},d={},v={},i=1;i<21;i++)t={No:"A".concat(i),booked:"0"},this.seats[0].push(t),e={No:"B".concat(i),booked:"0"},this.seats[1].push(e),o={No:"C".concat(i),booked:"0"},this.seats[2].push(o),n={No:"D".concat(i),booked:"0"},this.seats[3].push(n),r={No:"E".concat(i),booked:"0"},this.seats[4].push(r),c={No:"F".concat(i),booked:"0"},this.seats[5].push(c),l={No:"G".concat(i),booked:"0"},this.seats[6].push(l),h={No:"H".concat(i),booked:"0"},this.seats[7].push(h),d={No:"I".concat(i),booked:"0"},this.seats[8].push(d),v={No:"J".concat(i),booked:"0"},this.seats[9].push(v)},getTrainList:function(){var t=this;""!==this.dateSearch&&function(){for(var e=["0803","0609","0813","0125","0829","0141","0845","0853","0861","0295","0802","0610","0814","0630","0830","0654","0846","0854","0862","0294"],o=Object(l.d)(Object(l.c)(Object(d.a)())),n=function(n){Object(l.b)(Object(l.a)(o,"oneTrains/info/No".concat(e[n]))).then((function(o){o.exists()&&(0===o.val().GeneralTrainInfo.Direction?t.toSouth.push(e[n]):1===o.val().GeneralTrainInfo.Direction&&t.toNorth.push(e[n]),t.madeTrainList())}))},r=0;r<e.length;r++)n(r)}()},madeTrainList:function(){0===this.direction?this.trainList=JSON.parse(JSON.stringify(this.toSouth)):1===this.direction&&(this.trainList=JSON.parse(JSON.stringify(this.toNorth)))},getTrainStops:function(){var t=this;if(""!==this.trainNo){this.stops=JSON.parse(JSON.stringify(this.backupStops)),this.searchInfo={departure:{name:this.$t("data.station0"),value:""},arrival:{name:this.$t("data.station0"),value:""}};var e="https://ptx.transportdata.tw/MOTC/v2/Rail/THSR/GeneralTimetable/TrainNo/".concat(this.trainNo,"?%24top=30&%24format=JSON");c.a.get(e,{headers:Object(h.a)()}).then((function(e){if(e.data.length>0){t.trainData=e.data[0].GeneralTimetable;for(var o=e.data[0].GeneralTimetable.StopTimes,n=[],i=0;i<o.length;i++)n.push(o[i].StationID);n.sort();for(var r=[],c=0;c<n.length;c++)for(var l=0;l<t.stops.length;l++)n[c]===t.stops[l].value&&r.push(t.stops[l]);t.stops=r}else t.customAlert(t.$t("checkoutCars.noStop"))}))}},getSeatsInfo:function(){var t=this;if(""===this.dateSearch||""===this.trainNo)this.customAlert(this.$t("data.alertWholeMes")),this.resetData(),this.createSeats();else{this.resetData();var e=Object(l.d)(Object(l.c)(Object(d.a)())),o=this.dateSearch,n=this.trainNo;Object(l.b)(Object(l.a)(e,"bookedSeats/".concat(o,"/").concat(n))).then((function(e){if(e.exists()){var o=e.val();t.inputSeatData=o.seatsData,t.createSeats(),""===t.searchInfo.departure.value||""===t.searchInfo.arrival.value?(t.initSeatTable(),t.buildSeatsList(),t.showPanel=!0,t.readyBookDisable=!0):(t.initSeatTableS(),t.buildSeatsList(),t.showPanel=!0,t.readyBookDisable=!1)}else""===t.searchInfo.departure.value||""===t.searchInfo.arrival.value?(t.resetData(),t.createSeats(),t.showPanel=!0,t.readyBookDisable=!0):(t.resetData(),t.createSeats(),t.showPanel=!0,t.readyBookDisable=!1)})).catch((function(t){console.error(t)}))}},buildSeatsList:function(){for(var t=[],e=[],o=[],n="",r=[],c=[],a=0;a<this.seats.length;a++){r=this.seats[a];for(var b=0;b<r.length;b++)"1"===r[b].booked&&c.push(r[b].No)}for(var i=0;i<this.carNos.length;i++){for(var l=0;l<c.length;l++)(o=c[l].split(""))[0]===this.carNos[i]&&(o[2]?(n="".concat(o[1]).concat(o[2]),t.push(n)):(n="".concat(o[1]),t.push(n)));t.sort((function(a,b){return a-b}));for(var h=0;h<t.length;h++)t[h]="".concat(this.carNos[i]).concat(t[h]),e.push(t[h]);t=[]}this.bookedSeats=e},openSeatsList:function(){this.seatsList?this.seatsList=!1:this.seatsList=!0},initSeatTable:function(){if(this.inputSeatData.length>0)for(var t=this.inputSeatData,e=this.seats,o={},input={},i=0;i<t.length;i++)for(var n=0;n<e.length;n++){o=e[n];for(var r=0;r<o.length;r++)if(o[r].No===t[i].seatsNo){input=t[i];for(var c=0;c<input.tookOrNot.length;c++)!0===input.tookOrNot[c].took&&(o[r].booked="1")}}},initSeatTableS:function(){if(this.inputSeatData.length>0)for(var t=this.inputSeatData,e=this.seats,input={},o=[],i=0;i<t.length;i++)for(var n=0;n<e.length;n++){o=e[n];for(var r=0;r<o.length;r++)if(o[r].No===t[i].seatsNo){input=t[i];for(var c=0;c<input.tookOrNot.length;c++)if(this.searchInfo.arrival.value>this.searchInfo.departure.value){if(this.searchInfo.departure.value<=input.tookOrNot[c].station&&input.tookOrNot[c].station<this.searchInfo.arrival.value&&!0===input.tookOrNot[c].took){o[r].booked="1";break}}else if(this.searchInfo.arrival.value<input.tookOrNot[c].station&&input.tookOrNot[c].station<=this.searchInfo.departure.value&&!0===input.tookOrNot[c].took){o[r].booked="1";break}}}},keyInCarNo:function(t){this.selectedCar=t},checkInfo:function(t,e){if(e&&(this.showDelete=e),this.showInfos=JSON.parse(JSON.stringify(this.backupShowInfos)),this.rebuildInfo(this.showInfos),this.inputSeatData.length>0){for(var i=0;i<this.inputSeatData.length;i++)if(t===this.inputSeatData[i].seatsNo){var o=this.rebuildInfo(this.inputSeatData[i]);this.showInfos=this.rebuildType(o)}}else this.showInfos.seatsNo=t},rebuildInfo:function(t){var e=this,o=["0990","1000","1010","1020","1030","1035","1040","1043","1047","1050","1060","1070"],n=JSON.parse(JSON.stringify(t)),r={station:"",took:!1};return n.tookOrNot.forEach((function(t){r=t,o.forEach((function(o){t.station===o&&(r.station=e.$t("checkoutCars.station".concat(o)))}))})),n},rebuildType:function(t){for(var data=t,i=0;i<data.tookOrNot.length;i++)"adult"===data.tookOrNot[i].type?data.tookOrNot[i].showType=this.$t("manage.adult"):"kid"===data.tookOrNot[i].type?data.tookOrNot[i].showType=this.$t("manage.kid"):"love"===data.tookOrNot[i].type?data.tookOrNot[i].showType=this.$t("manage.love"):"older"===data.tookOrNot[i].type?data.tookOrNot[i].showType=this.$t("manage.older"):"student"===data.tookOrNot[i].type&&(data.tookOrNot[i].showType=this.$t("manage.student"));return data},closeTable:function(){this.showDelete=!1,this.confirmValue=!1,this.selectedDelete="",this.selectedType="",this.showInfos=JSON.parse(JSON.stringify(this.backupShowInfos))},deleteSeatInfo:function(){for(var t=[],e="",i=0;i<this.showInfos.tookOrNot.length;i++)this.showInfos.tookOrNot[i].ID&&(e={name:"".concat(this.showInfos.tookOrNot[i].ID," ").concat(this.showInfos.tookOrNot[i].showType),value:"".concat(this.showInfos.tookOrNot[i].ID," ").concat(this.showInfos.tookOrNot[i].type)},t.push(e));var o=t.filter((function(element,t,e){return e.indexOf(element)===t}));this.userList=o,this.chooseDelete(this.$t("checkoutCars.selectUser"))},chooseDelete:function(t){this.select=!0,this.selectMes=t},closeSelect:function(){this.select=!1,this.selectedDelete=""},checkSelect:function(){if(""!==this.selectedDelete)for(var t={ID:"",date:"",phone:"",time:"",type:"",took:!1},e=[],o={},n=0;n<this.inputSeatData.length;n++)if(this.inputSeatData[n].seatsNo===this.showInfos.seatsNo){for(var i=0;i<this.showInfos.tookOrNot.length;i++)t=this.inputSeatData[n].tookOrNot[i],e=this.selectedDelete.split(" "),t.ID===e[0]&&t.type===e[1]&&(o={ID:t.ID,date:t.date,phone:t.phone,time:t.time,type:t.type},delete t.ID,delete t.date,delete t.phone,delete t.time,delete t.type,t.took=!1);this.inputSeatData[n].tookOrNot.every((function(t){return!1===t.took}))&&this.inputSeatData.splice(n,1),this.user=o,this.getUserData(o)}},updateSeatInfo:function(){for(var t=[],e="",i=0;i<this.showInfos.tookOrNot.length;i++)this.showInfos.tookOrNot[i].ID&&(e={name:"".concat(this.showInfos.tookOrNot[i].ID," ").concat(this.showInfos.tookOrNot[i].showType),value:"".concat(this.showInfos.tookOrNot[i].ID," ").concat(this.showInfos.tookOrNot[i].type)},t.push(e));var o=t.filter((function(element,t,e){return e.indexOf(element)===t}));this.userList=o,this.chooseUpdate(this.$t("checkoutCars.selectUser"))},chooseUpdate:function(t){this.select2=!0,this.selectMes=t},closeUpdate:function(){this.select2=!1,this.selectedDelete="",this.selectedType=""},checkUpdate:function(){if(""!==this.selectedDelete&&""!==this.selectedType)for(var t={ID:"",date:"",phone:"",time:"",type:""},e=[],o={},n=0;n<this.inputSeatData.length;n++)if(this.inputSeatData[n].seatsNo===this.showInfos.seatsNo){for(var i=0;i<this.showInfos.tookOrNot.length;i++)t=this.inputSeatData[n].tookOrNot[i],e=this.selectedDelete.split(" "),t.ID===e[0]&&t.type===e[1]&&(o={ID:t.ID,date:t.date,phone:t.phone,time:t.time,type:t.type},t.type=this.selectedType);this.user=o,this.getUserData(o)}},setSeatData:function(){var t=Object(l.c)(Object(d.a)());Object(l.g)(Object(l.d)(t,"bookedSeats/".concat(this.dateSearch,"/").concat(this.trainNo)),{seatsData:this.inputSeatData})},getUserData:function(t){var e=this,o={},n=Object(l.d)(Object(l.c)(Object(d.a)()));Object(l.b)(Object(l.a)(n,"users/".concat(t.ID,"/").concat(t.phone,"/").concat(t.date,"/").concat(t.time))).then((function(n){n.exists()&&(o=n.val(),e.dealUserData(o,t.type))}))},dealUserData:function(t,e){this.select=!1,this.select2=!1;var data={startStation:{name:"",value:""},endStation:{name:"",value:""},carType:"",date:"",trainNo:"",departTime:"",arrivalTime:"",ticketCount:[{key:"",name:"",value:0},{key:"",name:"",value:0},{key:"",name:"",value:0},{key:"",name:"",value:0},{key:"",name:"",value:0}],seatsNo:[""],price:0},o="";t.goingTo.trainNo===this.trainNo?(data=t.goingTo,o="goingTo",this.getPrice(data.startStation.value,data.endStation.value)):t.goingBack.trainNo===this.trainNo&&(data=t.goingBack,o="goingBack",this.getPrice(data.startStation.value,data.endStation.value)),this.callData=data,this.callType=e,this.direct=o,this.customConfirm(this.$t("data.confirmChange"))},rebuildUserData:function(t,e){for(var o=null,data=t,i=0;i<data.seatsNo.length;i++)data.seatsNo[i]===this.showInfos.seatsNo&&data.seatsNo.splice(i,1);"adult"===e?(o=data.ticketCount[0].value-1,data.ticketCount[0].value=o):"kid"===e?(o=data.ticketCount[1].value-1,data.ticketCount[1].value=o):"love"===e?(o=data.ticketCount[2].value-1,data.ticketCount[2].value=o):"elder"===e?(o=data.ticketCount[3].value-1,data.ticketCount[3].value=o):"student"===e&&(o=data.ticketCount[4].value-1,data.ticketCount[4].value=o),data.price=this.countPrice(data.carType,data.ticketCount),this.setUserData(data),this.setSeatData(),this.closeTable(),this.getSeatsInfo()},rebuildUserDataU:function(t,e){var o=null,data=t;"adult"===e?(o=data.ticketCount[0].value-1,data.ticketCount[0].value=o):"kid"===e?(o=data.ticketCount[1].value-1,data.ticketCount[1].value=o):"love"===e?(o=data.ticketCount[2].value-1,data.ticketCount[2].value=o):"elder"===e?(o=data.ticketCount[3].value-1,data.ticketCount[3].value=o):"student"===e&&(o=data.ticketCount[4].value-1,data.ticketCount[4].value=o),"adult"===this.selectedType?(o=data.ticketCount[0].value+1,data.ticketCount[0].value=o):"kid"===this.selectedType?(o=data.ticketCount[1].value+1,data.ticketCount[1].value=o):"love"===this.selectedType?(o=data.ticketCount[2].value+1,data.ticketCount[2].value=o):"elder"===this.selectedType?(o=data.ticketCount[3].value+1,data.ticketCount[3].value=o):"student"===this.selectedType&&(o=data.ticketCount[4].value+1,data.ticketCount[4].value=o),data.price=this.countPrice(data.carType,data.ticketCount),this.setUserData(data),this.setSeatData(),this.closeTable(),this.getSeatsInfo()},setUserData:function(data){var t=Object(l.c)(Object(d.a)());"goingTo"===this.direct?Object(l.f)(Object(l.d)(t,"users/".concat(this.user.ID,"/").concat(this.user.phone,"/").concat(this.user.date,"/").concat(this.user.time)),{goingTo:data}):"goingBack"===this.direct&&Object(l.f)(Object(l.d)(t,"users/".concat(this.user.ID,"/").concat(this.user.phone,"/").concat(this.user.date,"/").concat(this.user.time)),{goingBack:data})},getPrice:function(t,e){var o=this,n=Object(l.d)(Object(l.c)(Object(d.a)()));""!==t&&""!==e&&Object(l.b)(Object(l.a)(n,"fares/fare/start".concat(t,"/end").concat(e))).then((function(t){for(var e=[],n={},i=0;i<t.val().Fares.length;i++)n=t.val().Fares[i].Price,e.push(n);e.sort((function(a,b){return a-b})),o.fares={freeKid:e[0],standardKid:e[1],standardGroup:e[2],freeAdult:e[3],standardAdult:e[4],bussinessKid:e[5],bussinessGroup:e[6],bussinessAdult:e[7]}}))},getTrainTime:function(){for(var data=this.trainData.StopTimes,i=0;i<data.length;i++)data[i].StationID===this.searchInfo.departure.value?this.trainTime.departure=data[i].DepartureTime:data[i].StationID===this.searchInfo.arrival.value&&(this.trainTime.arrival=data[i].ArrivalTime);var t=this.trainData.GeneralTrainInfo.Direction,e=parseInt(this.searchInfo.departure.value,10),o=parseInt(this.searchInfo.arrival.value,10);(0===t&&e>o||1===t&&e<o)&&(this.searchInfo={departure:{name:this.$t("data.station0"),value:""},arrival:{name:this.$t("data.station0"),value:""}},this.customAlert(this.$t("checkoutCars.directERR")))},readyBook:function(){this.goBookSys=!0},cancelBook:function(){this.getSeatsInfo()},openBookPanel:function(){this.selectedSeats.length>0?(this.bookPanel=!0,this.createTime()):this.customAlert(this.$t("checkoutCars.alertSeat"))},openBookedPanel:function(t){this.selectedSeats.length>0?(this.selectedSeats=[],this.selectedSeats.push(t),this.bookPanel=!0,this.createTime(),this.copyTookOrNot()):(this.selectedSeats.push(t),this.bookPanel=!0,this.createTime(),this.copyTookOrNot())},copyTookOrNot:function(){for(var i=0;i<this.inputSeatData.length;i++)this.selectedSeats[0]===this.inputSeatData[i].seatsNo&&(this.tookOrNot=this.inputSeatData[i].tookOrNot)},closePanel:function(){var t=this;this.bookPanel=!1,this.stops=[{name:this.$t("data.station0"),value:""},{name:this.$t("data.station0990"),value:"0990"},{name:this.$t("data.station1000"),value:"1000"},{name:this.$t("data.station1010"),value:"1010"},{name:this.$t("data.station1020"),value:"1020"},{name:this.$t("data.station1030"),value:"1030"},{name:this.$t("data.station1035"),value:"1035"},{name:this.$t("data.station1040"),value:"1040"},{name:this.$t("data.station1043"),value:"1043"},{name:this.$t("data.station1047"),value:"1047"},{name:this.$t("data.station1050"),value:"1050"},{name:this.$t("data.station1060"),value:"1060"},{name:this.$t("data.station1070"),value:"1070"}];this.ticketCount.forEach((function(t){t.value=0})),["adult","kid","love","older","student"].forEach((function(e){t.showType[e]=[]})),this.totalPrice=0,this.userId="",this.phoneNum=""},createTime:function(){var t=new Date,e=t.getFullYear(),o=t.getMonth()+1>=10?t.getMonth()+1:"0".concat(t.getMonth()+1),dd=t.getDate()<10?"0".concat(t.getDate()):t.getDate(),n="".concat(e,"-").concat(o,"-").concat(dd);this.todayDate=n;var r=t.getHours()<10?"0".concat(t.getHours()):t.getHours(),c=t.getMinutes()<10?"0".concat(t.getMinutes()):t.getMinutes(),l="".concat(r,":").concat(c);this.todayTime=l},dealShowSeats:function(){var t=this.ticketCount;t[0].value>0&&(this.showType.adult=this.selectedSeats.slice(0,t[0].value)),t[1].value>0&&(this.showType.kid=this.selectedSeats.slice(t[0].value,t[0].value+t[1].value));var e=t[0].value+t[1].value;t[2].value>0&&(this.showType.love=this.selectedSeats.slice(e,e+t[2].value));var o=e+t[2].value;t[3].value>0&&(this.showType.older=this.selectedSeats.slice(o,o+t[3].value));var n=o+t[3].value;t[4].value>0&&(this.showType.student=this.selectedSeats.slice(n,n+t[4].value))},dealTicket:function(){var t=this.ticketCount,e=t.map((function(t){return t.value}));this.totalSeat=e.reduce((function(t,e){return t+e})),this.totalPrice=this.countPrice(this.carType,t)},countPrice:function(t,e){var o=0;return"0"===t?o=this.fares.standardAdult*e[0].value+this.fares.standardKid*e[1].value+this.fares.standardKid*e[2].value+this.fares.standardKid*e[3].value+this.fares.standardGroup*e[4].value:"1"===t&&(o=this.fares.bussinessAdult*e[0].value+this.fares.bussinessKid*e[1].value+this.fares.bussinessKid*e[2].value+this.fares.bussinessKid*e[3].value+this.fares.bussinessGroup*e[4].value),o},goBook:function(){""!==this.userId&&""!==this.phoneNum&&""!==this.carType&&""!==this.searchInfo.departure.value&&""!==this.searchInfo.arrival.value?this.checkIDPhone():this.customAlert(this.$t("checkoutCars.needData"))},checkIDPhone:function(){for(var t=this.phoneNum.split(""),e=this.userId.split(""),o=!1,n=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],i=0;i<n.length;i++)n[i]===e[0]&&(o=!0);10===t.length&&10===e.length&&o?this.checkTickets():this.customAlert(this.$t("booking.PFErr"))},checkTickets:function(){this.totalSeat===this.selectedSeats.length&&this.totalSeat>0?(this.setTookOrNot(),this.customConfirm(this.$t("checkoutCars.sure"))):this.customAlert(this.$t("checkoutCars.tickErr"))},setTookOrNot:function(){var t=parseInt(this.searchInfo.departure.value,10),e=parseInt(this.searchInfo.arrival.value,10),o=null;if(t<e)for(var i=0;i<this.tookOrNot.length;i++)t<=(o=parseInt(this.tookOrNot[i].station,10))&&o<e&&(this.tookOrNot[i].took=!0);else for(var n=0;n<this.tookOrNot.length;n++)t>=(o=parseInt(this.tookOrNot[n].station,10))&&o>e&&(this.tookOrNot[n].took=!0)},setSeatsData:function(){var t={},e=[];if(this.inputSeatData.length>0)for(var i=0;i<this.inputSeatData.length;i++)for(var o=0;o<this.selectedSeats.length;o++)this.inputSeatData[i].seatsNo===this.selectedSeats[o]&&(t=JSON.stringify(this.inputSeatData[i]),e.push(JSON.parse(t)));for(var n=this.setSeatsTypeS(this.inputSeatData,e),r=this.dealNewBook(this.inputSeatData),a=0;a<this.inputSeatData.length;a++)for(var c=0;c<n.length;c++)this.inputSeatData[a].seatsNo===n[c].seatsNo&&this.inputSeatData.splice(a,1,n[c]);for(var b=0;b<this.selectedSeats.length;b++)this.inputSeatData.push(this.selectedSeats[b]);for(var l=0;l<this.inputSeatData.length;l++)for(var h=0;h<r.length;h++)this.inputSeatData[l]===r[h].seatsNo&&this.inputSeatData.splice(l,1,r[h]);return this.inputSeatData},dealNewBook:function(t){for(var e=0;e<this.selectedSeats.length;e++)for(var o=0;o<t.length;o++)this.selectedSeats[e]===t[o].seatsNo&&this.selectedSeats.splice(e,1);var n=[];return this.selectedSeats.length>0&&(n=this.setSeatsType()),n},setSeatsType:function(){var t=[];return this.insertSeatsType(t,"adult"),this.insertSeatsType(t,"kid"),this.insertSeatsType(t,"love"),this.insertSeatsType(t,"older"),this.insertSeatsType(t,"student"),t},insertSeatsType:function(t,e){for(var o={},n={},r=JSON.stringify(this.tookOrNot),a=0;a<this.showType[e].length;a++){for(var c=0;c<this.selectedSeats.length;c++)if(this.showType[e][a]===this.selectedSeats[c]){n=JSON.parse(r);for(var b=0;b<n.length;b++)n[b].took&&(n[b].type=e,n[b].ID=this.userId,n[b].phone=this.phoneNum,n[b].date=this.todayDate,n[b].time=this.todayTime,o={seatsNo:this.showType[e][a],tookOrNot:n})}t.push(o)}},setSeatsTypeS:function(t){var e=[];return this.insertSeatsTypeS(t,e,"adult"),this.insertSeatsTypeS(t,e,"kid"),this.insertSeatsTypeS(t,e,"love"),this.insertSeatsTypeS(t,e,"older"),this.insertSeatsTypeS(t,e,"student"),e},insertSeatsTypeS:function(t,e,o){for(var n={},r={},c=[],l=JSON.stringify(this.tookOrNot),a=0;a<this.showType[o].length;a++){for(var h=0;h<t.length;h++)if(t[h].seatsNo===this.showType[o][a]){c=t[h].tookOrNot,r=JSON.parse(l);for(var b=0;b<r.length;b++)r[b].took&&(c[b].type=o,c[b].took=!0,c[b].ID=this.userId,c[b].phone=this.phoneNum,c[b].date=this.todayDate,c[b].time=this.todayTime,n={seatsNo:this.showType[o][a],tookOrNot:c})}e.push(n)}},oneWayBook:function(){var t=this;if(this.confirmValue){this.setSeatsData();var e=Object(l.c)(Object(d.a)());Object(l.f)(Object(l.d)(e,"users/".concat(this.userId,"/").concat(this.phoneNum,"/").concat(this.todayDate,"/").concat(this.todayTime,"/goingTo")),{startStation:this.searchInfo.departure,endStation:this.searchInfo.arrival,carType:this.carType,date:this.dateSearch,trainNo:this.trainNo,departTime:this.trainTime.departure,arrivalTime:this.trainTime.arrival,ticketCount:this.ticketCount,seatsNo:this.selectedSeats,price:this.totalPrice}),Object(l.f)(Object(l.d)(e,"bookedSeats/".concat(this.dateSearch,"/").concat(this.trainNo)),{seatsData:this.inputSeatData}).then((function(){t.customAlert(t.$t("data.bookSuccess")),t.confirmValue=!1,t.getSeatsInfo()})).catch((function(){t.customAlert(t.$t("data.bookAgain")),t.confirmValue=!1}))}}}},f=(o(608),o(87)),k=o(178),m=o.n(k),_=o(640),S=o(360),y=o(355),N=o(551),T=o(628),C=o(361),w=o(629),D=o(630),I=o(558),O=o(544),x=o(362),$=o(557),j=o(549),P=o(624),component=Object(f.a)(v,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-app",[o("v-container",{staticClass:"alert-area"},[t.alert?o("v-alert",{staticClass:"mx-auto",attrs:{color:"orange lighten-1","max-width":"400",elevation:"4",type:"info",transition:"scale-transition"}},[o("v-row",{staticClass:"text-center",attrs:{justify:"center"}},[o("v-col",{attrs:{cols:"10"}},[t._v("\n                  "+t._s(t.message)+"\n                ")]),t._v(" "),o("v-col",[o("v-btn",{attrs:{color:"amber darken-4"},on:{click:t.closeAlert}},[t._v("X")])],1)],1)],1):t._e()],1),t._v(" "),o("v-container",{staticClass:"confirm-area"},[t.confirm?o("v-alert",{staticClass:"mx-auto",attrs:{"max-width":"400",elevation:"4",type:"info",transition:"scale-transition"}},[o("v-row",{staticClass:"text-center",attrs:{justify:"center"}},[o("v-col",{attrs:{cols:"12"}},[t._v("\n                  "+t._s(t.confirmMes)+"\n                ")]),t._v(" "),o("v-col",{staticClass:"auto",attrs:{cols:"6"}},[o("v-btn",{staticClass:"px-0",attrs:{color:"light-blue"},on:{click:t.OKConfirm}},[t._v("OK")])],1),t._v(" "),o("v-col",{staticClass:"mx-auto",attrs:{cols:"6"}},[o("v-btn",{staticClass:"px-0",attrs:{color:"blue lighten-5",light:""},on:{click:t.closeConfirm}},[t._v("X")])],1)],1)],1):t._e()],1),t._v(" "),o("v-container",{staticClass:"select-area"},[t.select?o("v-alert",{staticClass:"mx-auto",attrs:{color:"white","max-width":"400",elevation:"4",transition:"scale-transition"}},[o("v-row",{staticClass:"text-center",attrs:{justify:"center"}},[o("v-col",[o("v-select",{staticClass:"mx-auto",attrs:{items:t.userList,"item-text":"name","item-value":"value",label:t.selectMes},model:{value:t.selectedDelete,callback:function(e){t.selectedDelete=e},expression:"selectedDelete"}})],1),t._v(" "),o("v-col",{attrs:{cols:"12"}},[o("v-btn",{attrs:{color:"black",dark:""},on:{click:t.checkSelect}},[t._v("OK")]),t._v(" "),o("v-btn",{attrs:{color:"grey lighten-3",light:""},on:{click:t.closeSelect}},[t._v("X")])],1)],1)],1):t._e()],1),t._v(" "),o("v-container",{staticClass:"select-area"},[t.select2?o("v-alert",{staticClass:"mx-auto",attrs:{color:"white","max-width":"400",elevation:"4",transition:"scale-transition"}},[o("v-row",{staticClass:"text-center",attrs:{justify:"center"}},[o("v-col",[o("v-select",{staticClass:"mx-auto",attrs:{items:t.userList,"item-text":"name","item-value":"value",label:t.selectMes},model:{value:t.selectedDelete,callback:function(e){t.selectedDelete=e},expression:"selectedDelete"}})],1),t._v(" "),o("v-col",[o("v-select",{staticClass:"mx-auto",attrs:{items:t.tickType,"item-text":"name","item-value":"value",label:t.$t("checkoutCars.selectType")},model:{value:t.selectedType,callback:function(e){t.selectedType=e},expression:"selectedType"}})],1),t._v(" "),o("v-col",{attrs:{cols:"12"}},[o("v-btn",{attrs:{color:"black",dark:""},on:{click:t.checkUpdate}},[t._v("OK")]),t._v(" "),o("v-btn",{attrs:{color:"grey lighten-3",light:""},on:{click:t.closeUpdate}},[t._v("X")])],1)],1)],1):t._e()],1),t._v(" "),o("v-container",{staticClass:"checkout-cars"},[o("v-container",[o("v-row",{attrs:{align:"center"}},[o("v-col",{attrs:{cols:"12",sm:"5"}},[o("h1",[t._v(t._s(t.$t("checkoutCars.title")))])]),t._v(" "),o("v-col",{staticClass:"text-center",attrs:{cols:"12",sm:"7"}},[o("v-row",{attrs:{justify:"space-around"}},[o("div",{staticClass:"my-1"},[o("v-btn",{attrs:{nuxt:"",to:t.localePath("/manage"),outlined:""}},[t._v("\n                              "+t._s(t.$t("checkoutCars.manage"))+"\n                          ")])],1),t._v(" "),o("div",{staticClass:"my-1"},[o("v-btn",{attrs:{nuxt:"",to:t.localePath("/manageBook"),color:"teal",outlined:""}},[t._v("\n                              "+t._s(t.$t("manage.manageBook"))+"\n                          ")])],1),t._v(" "),o("div",{staticClass:"my-1"},[o("v-btn",{attrs:{nuxt:"",to:t.localePath("/"),color:"primary"}},[t._v("\n                              "+t._s(t.$t("checkoutCars.index"))+"\n                          ")])],1)])],1)],1)],1),t._v(" "),o("v-container",[o("v-form",{ref:"form",attrs:{"lazy-validation":""}},[o("v-row",{attrs:{align:"center",justify:"center"}},[o("v-col",{attrs:{cols:"12",sm:"4",md:"2"}},[o("v-select",{staticClass:"data-input mx-auto",attrs:{items:t.dateList,label:t.$t("checkoutCars.date")},model:{value:t.dateSearch,callback:function(e){t.dateSearch=e},expression:"dateSearch"}})],1),t._v(" "),o("v-col",{attrs:{cols:"12",sm:"4",md:"2"}},[o("v-select",{staticClass:"data-input mx-auto",attrs:{items:t.trainList,label:t.$t("checkoutCars.trainNo")},model:{value:t.trainNo,callback:function(e){t.trainNo=e},expression:"trainNo"}})],1),t._v(" "),o("v-col",{attrs:{cols:"12",sm:"4",md:"2"}},[o("v-select",{staticClass:"data-input mx-auto",attrs:{items:t.sOrN,"item-text":"name","item-value":"value",label:t.$t("checkoutCars.direction")},model:{value:t.direction,callback:function(e){t.direction=e},expression:"direction"}})],1),t._v(" "),o("v-col",{attrs:{cols:"12",sm:"6",md:"2"}},[o("v-select",{staticClass:"data-input mx-auto",attrs:{label:t.$t("index.departure"),items:t.stops,"item-text":"name","item-value":"value","return-object":"","background-color":"white"},model:{value:t.searchInfo.departure,callback:function(e){t.$set(t.searchInfo,"departure",e)},expression:"searchInfo.departure"}})],1),t._v(" "),o("v-col",{attrs:{cols:"12",sm:"6",md:"2"}},[o("v-select",{staticClass:"data-input mx-auto",attrs:{label:t.$t("index.arrival"),items:t.stops,"item-text":"name","item-value":"value","return-object":"","background-color":"white"},model:{value:t.searchInfo.arrival,callback:function(e){t.$set(t.searchInfo,"arrival",e)},expression:"searchInfo.arrival"}})],1),t._v(" "),o("v-col",{staticClass:"text-center",attrs:{cols:"12",md:"2"}},[o("div",[o("v-btn",{attrs:{color:"success"},on:{click:t.getSeatsInfo}},[t._v("\n                              "+t._s(t.$t("checkoutCars.search"))+"\n                          ")])],1)])],1)],1)],1),t._v(" "),o("v-container",[o("div",{staticClass:"my-2"},[o("v-btn",{attrs:{color:"indigo lighten-4",small:""},on:{click:t.openTrainLists}},[t._v("\n                  "+t._s(t.$t("checkoutCars.trainNoList"))+"\n              ")])],1),t._v(" "),t._l(t.trainNoLists,(function(e){return o("div",{directives:[{name:"show",rawName:"v-show",value:t.showTrainNos,expression:"showTrainNos"}],key:"No"+e.GeneralTrainInfo.TrainNo,staticClass:"ma-3"},[o("div",{staticClass:"train-no",on:{click:function(o){return t.selectTrain(e.GeneralTrainInfo.TrainNo)}}},[o("span",[t._v("\n                      "+t._s(t.$t("checkoutCars.No"))+t._s(e.GeneralTrainInfo.TrainNo)+"\n                  ")]),t._v(" "),o("br"),t._v("\n                  "+t._s(t.$t("checkoutCars.stops"))+t._s(e.StopTimes.length)+"\n              ")]),t._v(" "),t.selectedTrain===e.GeneralTrainInfo.TrainNo?o("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[o("thead",[o("tr",[o("th",[t._v("\n                                  "+t._s(t.$t("checkoutCars.station"))+"\n                              ")]),t._v(" "),o("th",[t._v("\n                                  "+t._s(t.$t("checkoutCars.arrivalTime"))+"\n                              ")]),t._v(" "),o("th",[t._v("\n                                  "+t._s(t.$t("checkoutCars.departureTime"))+"\n                              ")])])]),t._v(" "),o("tbody",t._l(e.StopTimes,(function(e){return o("tr",{key:"stop"+e.StationID},[o("td",{staticClass:"text-center"},["en"===t.$i18n.locale?o("span",[t._v("\n                                      "+t._s(e.StationName.En)+"\n                                  ")]):t._e(),t._v(" "),"tw"===t.$i18n.locale?o("span",[t._v("\n                                      "+t._s(e.StationName.Zh_tw)+"\n                                  ")]):t._e()]),t._v(" "),o("td",{staticClass:"text-center"},[t._v("\n                                  "+t._s(e.ArrivalTime)+"\n                              ")]),t._v(" "),o("td",{staticClass:"text-center"},[t._v("\n                                  "+t._s(e.DepartureTime)+"\n                              ")])])})),0)]},proxy:!0}],null,!0)}):t._e()],1)}))],2),t._v(" "),o("v-container",{directives:[{name:"show",rawName:"v-show",value:t.showPanel,expression:"showPanel"}]},[o("div",{staticClass:"my-2"},[o("v-btn",{attrs:{color:"indigo lighten-4",small:""},on:{click:t.openSeatsList}},[t._v("\n                  "+t._s(t.$t("checkoutCars.seatList"))+"\n              ")])],1),t._v(" "),o("v-row",{directives:[{name:"show",rawName:"v-show",value:t.seatsList,expression:"seatsList"}],attrs:{justify:"start"}},t._l(t.bookedSeats,(function(e){return o("v-col",{key:"booked"+e},[o("v-card",{staticClass:"text-center",attrs:{width:"30"}},[t._v("\n                      "+t._s(e)+"\n                  ")])],1)})),1)],1),t._v(" "),o("v-container",{directives:[{name:"show",rawName:"v-show",value:t.showPanel,expression:"showPanel"}]},[t.goBookSys?o("div",{staticClass:"text-center"},[o("h2",[t._v(t._s(t.$t("checkoutCars.system")))]),t._v(" "),o("h3",[t._v(t._s(t.$t("checkoutCars.seatFirst")))]),t._v(" "),o("h3",[t._v(t._s(t.$t("checkoutCars.warnMes")))])]):t._e(),t._v(" "),o("v-row",{attrs:{justify:"end"}},[t._v("\n              "+t._s(t.$t("checkoutCars.stationFirst"))+"\n          ")]),t._v(" "),o("v-row",{staticClass:"my-2",attrs:{justify:"end"}},[t.selectedSeats.length>0?o("v-btn",{attrs:{color:"primary"},on:{click:t.openBookPanel}},[t._v("\n                  "+t._s(t.$t("checkoutCars.seatOK"))+"\n              ")]):t._e(),t._v(" "),t.goBookSys?o("v-btn",{on:{click:t.cancelBook}},[t._v("\n                  "+t._s(t.$t("checkoutCars.closeSys"))+"\n              ")]):o("v-btn",{attrs:{disabled:t.readyBookDisable},on:{click:t.readyBook}},[t._v("\n                  "+t._s(t.$t("checkoutCars.openSys"))+"\n              ")])],1),t._v(" "),o("v-row",[o("v-col",[o("div",{staticClass:"seat-choice"},[o("v-layout",{attrs:{"justify-center":""}},[o("h1",[t._v(t._s(t.$t("checkoutCars.table")))])]),t._v(" "),o("v-layout",{attrs:{"justify-center":""}},[o("div",{staticClass:"ready"},[t._v("\n                              "+t._s(t.$t("checkoutCars.free"))+"\n                              "),o("div",{staticClass:"can-be-choose"},[t._v("可")]),t._v("\n                              "+t._s(t.$t("checkoutCars.select"))+"\n                              "),o("div",{staticClass:"cant-be-choose"},[t._v("否")]),t._v("\n                              "+t._s(t.$t("checkoutCars.token"))+"\n                              "),o("div",{staticClass:"be-choosed"},[t._v("選")])])]),t._v(" "),o("div",{staticClass:"one-train"},t._l(t.seats,(function(e,n){return o("div",{key:e.index,staticClass:"seat"},[t.selectedCar===n?o("div",{staticClass:"select-car"},t._l(e,(function(e){return o("div",{key:e.index,staticClass:"seat-num"},["0"===e.booked&&t.goBookSys?o("label",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedSeats,expression:"selectedSeats"}],attrs:{type:"checkbox",name:"label"},domProps:{value:e.No,checked:Array.isArray(t.selectedSeats)?t._i(t.selectedSeats,e.No)>-1:t.selectedSeats},on:{change:function(o){var n=t.selectedSeats,r=o.target,c=!!r.checked;if(Array.isArray(n)){var l=e.No,h=t._i(n,l);r.checked?h<0&&(t.selectedSeats=n.concat([l])):h>-1&&(t.selectedSeats=n.slice(0,h).concat(n.slice(h+1)))}else t.selectedSeats=c}}}),t._v(" "),o("span",{staticClass:"round button"},[t._v("\n                                                "+t._s(e.No)+"\n                                              ")])]):"0"===e.booked?o("label",{on:{click:function(o){return t.checkInfo(e.No)}}},[o("input",{attrs:{type:"checkbox",name:"label",disabled:""},domProps:{value:e.No}}),t._v(" "),o("span",{staticClass:"round button"},[t._v("\n                                                "+t._s(e.No)+"\n                                              ")])]):o("label",{on:{click:function(o){return t.checkInfo(e.No,!0)}}},[o("input",{attrs:{type:"checkbox",name:"label",checked:"",disabled:""}}),t._v(" "),o("span",{staticClass:"round button booked"},[t._v("\n                                                "+t._s(e.No)+"\n                                              ")])])])})),0):t._e()])})),0),t._v(" "),o("v-row",{staticClass:"car-no ma-0 px-3",attrs:{justify:"center"}},t._l(t.carNos,(function(e,n){return o("v-col",{key:e.index,staticClass:"px-1",on:{click:function(e){return t.keyInCarNo(n)}}},[o("v-card",{attrs:{color:"lime lighten-4",hover:""}},[t._v("\n                                    "+t._s(e)+"\n                                ")])],1)})),1),t._v(" "),o("v-container",{staticClass:"selectedCar"},[t._v("\n                          "+t._s(t.$t("checkoutCars.carriageNo"))+" : "+t._s(t.showSelectedCar)+"\n                      ")])],1)]),t._v(" "),t.showInfos.seatsNo&&t.inputSeatData.length>0?o("v-col",{staticClass:"info-table pa-0"},[o("v-simple-table",[o("tbody",[o("tr",{staticClass:"no-hover"},[o("th"),t._v(" "),o("td",{staticClass:"text-right"},[t.showDelete&&!1===t.readyBookDisable?o("v-btn",{attrs:{color:"error",small:""},on:{click:t.deleteSeatInfo}},[t._v("\n                                      "+t._s(t.$t("checkoutCars.deleteBTN"))+"\n                                  ")]):t._e()],1),t._v(" "),o("td",[t.showDelete&&!1===t.readyBookDisable?o("v-btn",{staticClass:"mx-auto",attrs:{color:"cyan",small:""},on:{click:t.updateSeatInfo}},[t._v("\n                                      "+t._s(t.$t("checkoutCars.updateBTN"))+"\n                                  ")]):t._e(),t._v(" "),o("span",{on:{click:t.closeTable}},[t._v("X")])],1)]),t._v(" "),o("tr",{on:{click:t.closeTable}},[o("th",[t._v("\n                                "+t._s(t.$t("checkoutCars.seatNo"))+"\n                              ")]),t._v(" "),o("td"),t._v(" "),o("td",[t._v("\n                                "+t._s(t.showInfos.seatsNo)+"\n                              ")])]),t._v(" "),t._l(t.showInfos.tookOrNot,(function(e){return o("tr",{key:e.index,on:{click:t.closeTable}},[o("th",[t._v("\n                                "+t._s(e.station)+"\n                              ")]),t._v(" "),e.took?o("td",{staticClass:"booked"},[t._v("\n                                  "+t._s(t.$t("checkoutCars.token"))+"\n                                  "),o("br"),t._v("\n                                  "+t._s(t.$t("checkoutCars.type"))+":"+t._s(e.showType)+"\n                              ")]):o("td",[t._v("\n                                  "+t._s(t.$t("checkoutCars.free"))+"\n                              ")]),t._v(" "),o("td",[t._v("\n                                  "+t._s(t.$t("checkoutCars.ID"))+":"+t._s(e.ID)+"\n                                  "),o("br"),t._v("\n                                  "+t._s(t.$t("checkoutCars.phone"))+":"+t._s(e.phone)+"\n                              ")])])}))],2)])],1):t._e(),t._v(" "),o("v-col",{directives:[{name:"show",rawName:"v-show",value:t.bookPanel,expression:"bookPanel"}],staticClass:"booking-form pa-0"},[o("v-simple-table",[o("tbody",[o("tr",[o("th",[t._v(t._s(t.$t("booking.id")))]),t._v(" "),o("td",[o("v-text-field",{staticClass:"personal",attrs:{rules:t.userIdRule,success:""},model:{value:t.userId,callback:function(e){t.userId=e},expression:"userId"}})],1)]),t._v(" "),o("tr",[o("th",[t._v(t._s(t.$t("booking.phone")))]),t._v(" "),o("td",[o("v-text-field",{staticClass:"personal",attrs:{rules:t.phoneNumRule,success:""},model:{value:t.phoneNum,callback:function(e){t.phoneNum=e},expression:"phoneNum"}})],1)]),t._v(" "),o("tr",[o("th",[t._v(t._s(t.$t("booking.station")))]),t._v(" "),o("td",[o("v-select",{staticClass:"input d-inline-block mr-3",attrs:{items:t.stops,"item-text":"name","item-value":"value","return-object":"",label:t.$t("booking.departure"),"background-color":"white",disabled:""},model:{value:t.searchInfo.departure,callback:function(e){t.$set(t.searchInfo,"departure",e)},expression:"searchInfo.departure"}}),t._v(" "),o("v-select",{staticClass:"input d-inline-block",attrs:{items:t.stops,"item-text":"name","item-value":"value","return-object":"",label:t.$t("booking.arrival"),"background-color":"white",disabled:""},model:{value:t.searchInfo.arrival,callback:function(e){t.$set(t.searchInfo,"arrival",e)},expression:"searchInfo.arrival"}})],1)]),t._v(" "),o("tr",[o("th",[t._v(t._s(t.$t("booking.carType")))]),t._v(" "),o("td",[o("v-radio-group",{model:{value:t.carType,callback:function(e){t.carType=e},expression:"carType"}},[o("v-radio",{attrs:{label:t.$t("booking.standard"),value:"0"}}),t._v(" "),o("v-radio",{attrs:{label:t.$t("booking.business"),value:"1"}})],1)],1)]),t._v(" "),o("tr",[o("th",[t._v(t._s(t.$t("booking.time")))]),t._v(" "),o("td",[o("v-text-field",{staticClass:"input d-inline-block mr-3",attrs:{type:"date",label:t.$t("booking.goDate"),"background-color":"white",disabled:""},model:{value:t.dateSearch,callback:function(e){t.dateSearch=e},expression:"dateSearch"}}),t._v(" "),o("v-text-field",{staticClass:"input d-inline-block",attrs:{label:t.$t("booking.trainNo"),disabled:""},model:{value:t.trainNo,callback:function(e){t.trainNo=e},expression:"trainNo"}}),t._v(" "),o("br")],1)]),t._v(" "),o("tr",[o("th",[t._v("\n                              "+t._s(t.$t("booking.ticket"))+"\n                              ( "+t._s(t.totalSeat)+" )\n                          ")]),t._v(" "),o("td",[o("v-row",t._l(t.ticketCount,(function(e){return o("v-col",{key:e.index},[o("v-select",{staticClass:"input d-inline-block",attrs:{items:t.ticketCountNums,"item-text":"num","item-value":"value",label:t.$t(e.name),"background-color":"white"},model:{value:e.value,callback:function(o){t.$set(e,"value",o)},expression:"type.value"}})],1)})),1)],1)]),t._v(" "),o("tr",[o("th",[t._v("\n                              "+t._s(t.$t("checkoutCars.seatNo"))+"\n                              ( "+t._s(t.selectedSeats.length)+" )\n                          ")]),t._v(" "),o("td",[o("div",[t.ticketCount[0].value>0?o("div",[o("span",[t._v("\n                                          "+t._s(t.$t("booking.adultTick"))+":\n                                      ")]),t._v(" "),t._l(t.showType.adult,(function(e){return o("span",{key:e.index,staticClass:"mr-1"},[t._v("\n                                          "+t._s(e)+"\n                                      ")])}))],2):t._e(),t._v(" "),t.ticketCount[1].value>0?o("div",[o("span",[t._v("\n                                          "+t._s(t.$t("booking.kidTick"))+":\n                                      ")]),t._v(" "),t._l(t.showType.kid,(function(e){return o("span",{key:e.index,staticClass:"mr-1"},[t._v("\n                                          "+t._s(e)+"\n                                      ")])}))],2):t._e(),t._v(" "),t.ticketCount[2].value>0?o("div",[o("span",[t._v("\n                                          "+t._s(t.$t("booking.loveTick"))+":\n                                      ")]),t._v(" "),t._l(t.showType.love,(function(e){return o("span",{key:e.index,staticClass:"mr-1"},[t._v("\n                                          "+t._s(e)+"\n                                      ")])}))],2):t._e(),t._v(" "),t.ticketCount[3].value>0?o("div",[o("span",[t._v("\n                                          "+t._s(t.$t("booking.olderTick"))+":\n                                      ")]),t._v(" "),t._l(t.showType.older,(function(e){return o("span",{key:e.index,staticClass:"mr-1"},[t._v("\n                                          "+t._s(e)+"\n                                      ")])}))],2):t._e(),t._v(" "),t.ticketCount[4].value>0?o("div",[o("span",[t._v("\n                                          "+t._s(t.$t("booking.studentTick"))+":\n                                      ")]),t._v(" "),t._l(t.showType.student,(function(e){return o("span",{key:e.index,staticClass:"mr-1"},[t._v("\n                                          "+t._s(e)+"\n                                      ")])}))],2):t._e()])])]),t._v(" "),o("tr",[o("th",[t._v(t._s(t.$t("booking.price")))]),t._v(" "),o("td",[t._v("$"+t._s(t.totalPrice))])])])]),t._v(" "),o("v-row",{staticClass:"foot-bar my-3",attrs:{justify:"space-around"}},[o("v-btn",{attrs:{color:"success"},on:{click:t.goBook}},[t._v("\n                          "+t._s(t.$t("booking.book"))+"\n                      ")]),t._v(" "),o("v-btn",{attrs:{color:"error"},on:{click:t.closePanel}},[t._v("\n                          "+t._s(t.$t("checkoutCars.closePanel"))+"\n                      ")])],1)],1)],1)],1)],1)],1)}),[],!1,null,"29374636",null);e.default=component.exports;m()(component,{VAlert:_.a,VApp:S.a,VBtn:y.a,VCard:N.a,VCol:T.a,VContainer:C.a,VForm:w.a,VLayout:D.a,VRadio:I.a,VRadioGroup:O.a,VRow:x.a,VSelect:$.a,VSimpleTable:j.a,VTextField:P.a})}}]);